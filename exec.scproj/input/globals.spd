


function CakeRun.Glob (|message| size_msg, |bool|)
	opt norefcounts
	|int| glob_size = size_msg.int(0, 1, 256MB)$
	
	|| input		= InputStream(.strings)
	|| n_strs		= input.HInt
	expect (n_strs <= 1000_000) ("Too many strings in pack: " + n_strs)
	|| alloc_Size	= glob_size + (n_strs+1)*(platform.PointerBytes)
	|| g = byte[alloc_Size]	#require
	.globals = g

	|| StringTable = (g.Ptr + glob_size)|&string|
	|string| Last = nil
	for i in n_strs
		|| n = input.hint
		if last
			Last.Addr[last.length] = 0 // c-string! :]
		Last = string.new((input.Data.Curr)|cstring|, n)
		StringTable[i] = Last
	return true


// globals
	// vars (ints/object)
	// strings
