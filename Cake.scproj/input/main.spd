

module Cake
	|String|     Speedie = "/usr/local/bin/speedie"
	|SpdProcess| Perry = app.parent
	|!&CakeVM|   VM = CakeVM()
	|File|		 InputFile = Cake.Collect
	|&uint|		 BreakPoints = debugger.Startup
	|!&ASM|		 BeginCode = VM.code()|&ASM|


main
	opt NoRefCounts	
	target debug
		error.AutoPrint = 1	
	expect (cake.BeginCode) ("Can't allocate VM")
	require Globals.VerifyGlobs
	require cake.InputFile
	
	|| p = cake.perry
		p <~ "`hoi :3`"
	
	require CakeRun.GetStructure
	for f in SpdTable.funcs
		f.Linkâ—
	
	require debugger.Load
	return SpdTable.RunProgram

