

/*
	Jeebox internals. By Theodore H. Smith...
*/

class Process (list)
	size 64
	// the list functions mostly shouldn't be used. I should hide them somehow
	// kinda like I want to do with... roles.
	linkage
		wrapper
		cpp_part Sh
		cpp_class ShellStream
	contains Process
	
	|PID_Int| 				PID
	|string|				Path
	|[string]?|				Args
    |int64|					UserFlags // remoev these two?
//    |object|				UserObj

	constructor (|string| Path, |[string]| Args=nil, |ProcessMode| Mode)
		cpp_wrapper
	destructor:												cpp_wrapper
	
	function Status (|ExitCode|)
		cpp_Wrapper

	function UnRegister
		description "Removes from the process list. Doesnt change the exit, pid, or status codes" 
		.remove

	function Kill (|int| ExitCode)
		cpp_wrapper
	
	module
		function First (|Process|)
			cpp_wrapper

	render
		fs <~ "PID: $.pid\n${.path} $.args" // full path makes more sense, really.
	
	function ClosePipes
		cpp_wrapper JB_Sh_Close

	function ReadStdOut (|string|)
		cpp_wrapper

	function ReadStdErr (|string|)
		cpp_wrapper
		
	module
		function Stream (|String| app, |[string]| R=[], |processmode| Mode = nil, |Process?|)
			cpp_wrapper JB_Sh__Stream
