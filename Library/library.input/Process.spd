

/*
	Jeebox internals. By Theodore H. Smith...
*/

class Process
	linkage
		wrapper
		cpp_part Sh
		cpp_class ShellStream
		pragma noearlyfree
	contains Process
	
	|byte|					Mode
	|&Pico|					Pico
	|string|				Path
	|[string]?|				Args
    |int64|					UserFlags


	constructor (|string| Path, |ProcessMode| Mode=processmode.CaptureAll, |[string]| Args=nil, |&pico| Pico = nil)
		cpp_wrapper

	destructor:												cpp_wrapper
	
	function Status (|ExitCode|)
		cpp_wrapper

	function Kill (|int| ExitCode)
		cpp_wrapper

	function Start (|ExitCode|)
		cpp_Wrapper JB_Sh_StartProcess
	
	render
		cpp_wrapper JB_Sh_Render
	
	function PID (|int|)
		cpp_wrapper

	function ReadStdOut (|string|)
		cpp_wrapper

	function ReadStdErr (|string|)
		cpp_wrapper
		
	module
		function Stream (|String| app, |[string]| R=[], |processmode| Mode = nil, |Process?|)
			cpp_wrapper JB_Sh__Stream



datatype ProcessMode (byte)
	linkage
		cpp_part PIDM
//		numeric false // disallow implicit (syntax <--> int) conversion
	
	flags
		|ProcessMode| 
		CaptureAll = 0
		MsgPassing = 1
		StdOutSilence = 4
		StdOutPassThru = 8
		StdErrSilence = 16
		StdErrPassThru = 32
		Silence = StdOutSilence|||StdErrSilence
		PassThru = StdOutPassThru|||StdErrPassThru

		OwnGroup = 128


	syntax is (|ProcessMode| M, |bool|)
		return self|int|&M|int|


