


// byteposes are good enough. Perry can store byteposes on the textviewline
// perry can collect the byteposes, before compile and store on the textviewlines...

module SourceMap
	|faststring|	Positions
	|int|			LastLength

	function Check (|scfunction| fn, |int| T, |bool|)
		opt norefcounts
		|| p = .positions
			|| Dbg = p.length - .LastLength
			expect (dbg == T)								(fn, "Debug length corrupt")
		return true
		
	function Reserve (|int| T, |&uint|)
		opt norefcounts
		|| p = .positions
			.lastlength = p.length
			return p.Reserve(T)|&uint|
